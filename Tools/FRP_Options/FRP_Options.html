<!--
        原项目：https://diannaobos.com/frp/frp_config/frps.html
        修改：Acczdy
		=======================================

		【协议：】本项目仅供技术交流参考之用，请严格遵守当地法律法规，不要利用本项目中的技术进行违法犯罪操作，一旦触犯法律与Acczdy无关。
		除非您已充分阅读、完全理解并接受本协议所有条款，否则，请您不要安装并使用本工具。您的使用行为或者您以其他任何明示或者默示方式表示接受本协议的，即视为您已阅读并同意本协议的约束。
		如有侵权，请联系Acczdy及时删除！

		=======================================
-->
<html>
<!-- 弹窗页面 Start
  <script>
	  var result = window.confirm("原项目：https://diannaobos.com/frp/frp_config/frps.html/\r\n修改：Acczdy\r\n=======================================\r\n【协议：】本项目仅供技术交流参考之用，请严格遵守当地法律法规，不要利用本项目中的技术进行违法犯罪操作，一旦触犯法律与Acczdy无关。\r\n除非您已充分阅读、完全理解并接受本协议所有条款，否则，请您不要安装并使用本工具。您的使用行为或者您以其他任何明示或者默示方式表示接受本协议的，即视为您已阅读并同意本协议的约束如有侵权，请联系Acczdy及时删除！\r\n=======================================");
		if (result) {
		  // 用户点击了确定按钮
		  // 打开页面
		} else {
		  // 用户点击了取消按钮
		  // 关闭页面
		  window.close();
		}
  
  </script>
  弹窗页面 End -->
<head><meta charset="utf-8" /> 
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" /> 
  <title>frp在线配置系统</title> 

   
  <link href="../../static/css/bootstrap.min.css" rel="stylesheet" />
  <!-- 图标S--> 
  <link href="../../static/css/materialdesignicons.min.css"  rel="stylesheet" /> 
  <!-- 图标E-->
  <!-- 页面顶部CSS S--> 
  <link href="../../static/css/style.min.css"  rel="stylesheet" /> 
  <!-- 页面顶部CSS E--> 
 </head> 
 <body id="frps_ini">
<div class="container-fluid p-t-15"> 


<div class="row"> 
    <div class="col-sm-6"> 
     <div class="card"> 
      <div class="card-header bg-primary"> 
       <h3><i class="mdi"></i>&nbsp;FRPS配置-Server端</h3>
       <ul class="card-actions"> 
       </ul> 
      </div> 
      <div class="card-body">
        
		<div>
   <h2 align="center"></h2> 
   <form id="frps_ini"> 
    <br> 
    <table border="1"> 
     <tbody>
      <tr align="left"> 
       <th bgcolor="#66CCCC">服务器IP:</th> 
       <td><input type="text" value="0.0.0.0" name="bind_addr" id="bind_addr" placeholder="建议使用0.0.0.0"></td> 
      </tr> 
      <tr align="left"> 
       <th bgcolor="#66CCCC">服务器端口:</th> 
       <td><input type="number" value="7000" name="bind_port" id="bind_port" min="1" max="65535"> </td> 
      </tr> 
      <tr align="left"> 
       <th bgcolor="#66CCCC">特权密码：</th> 
       <td><input type="text" value="frp888" name="token" id="token"></td> 
      </tr> 
      <tr align="left"> 
       <th bgcolor="#66CCCC">http服务端口:</th> 
       <td><input type="number" value="80" name="vhost_http_port" id="vhost_http_port" min="1" max="65535"> </td> 
      </tr> 
      <tr align="left"> 
       <th bgcolor="#66CCCC">https服务端口:</th> 
       <td><input type="number" value="443" name="vhost_https_port" id="vhost_https_port" min="1" max="65535"> </td> 
      </tr> 
      <tr align="left"> 
       <th bgcolor="#66CCCC">状态查询端口:</th> 
       <td><input type="number" value="7500" name="dashboard_port" id="dashboard_port" min="1" max="65535"> </td> 
      </tr> 
      <tr align="left"> 
       <th bgcolor="#66CCCC">状态查询用户名:</th> 
       <td><input type="text" value="admin" name="dashboard_user" id="dashboard_user"> </td> 
      </tr> 
      <tr align="left"> 
       <th bgcolor="#66CCCC">状态查询密码:</th> 
       <td><input type="text" value="admin" name="dashboard_pwd" id="dashboard_pwd"> </td> 
      </tr> 
      <tr align="left"> 
       <th bgcolor="#66CCCC">端口开放范围:</th> 
       <td><input type="number" value="1-65535" name="allow_ports" id="allow_ports" min="1" max="65535"> </td> 
      </tr> 
     </tbody>
    </table> &nbsp; 
    <div align="center"> 
     <input name="down" type="button" onclick="down_ini_s()" value="查看并下载配置文件"> 
    </div>  
   </form> 
   </div>
		

      </div> 
     </div> 
    </div>


	
    <!-- .col-sm-6 --> 
    <div class="col-sm-6"> 
     <div class="card"> 
      <div class="card-header bg-cyan"> 
       <h3>FRPC配置-Client端</h3>
      </div> 
      <div class="card-body">
       
	   <center> 
   <br> 
   
   <br>
   <hr>
   <br>
   <div>
   <h2 align="center"></h2> 
   <form id="frpc_ini"> 
    <br> 
    <table align="center" border="1" cellpadding="1" cellspacing="0"> 
     <tbody> 
      <tr align="center" bgcolor="#66CCCC"> 
       <th>服务器地址</th> 
       <th>连接端口</th> 
       <th>特权密码</th> 
      </tr> 
      <tr align="center" bgcolor="#66CCCC"> 
       <td><input type="text" name="server_addr" id="server_addr" value="frp.lu8.win" autofocus=""> </td> 
       <td><input type="number" name="server_port" id="server_port" min="1" max="65535" value="7000"> </td> 
       <td><input type="password" name="privilege_token" id="privilege_token" value="frp888"></td> 
      </tr> 
     </tbody> 
    </table> 
    <br> 
    <br> 
    <table align="center" width="100%"> 
     <tbody> 
      <tr> 
       <td> 
        <table align="center" border="1" id="planTable" cellpadding="1" cellspacing="0"> 
         <tbody> 
          <tr align="center" bgcolor="#00FF00" color="red" onmouseover=""> 
           <th>序号</th> 
           <th>隧道名称</th> 
           <th>协议</th> 
           <th>本地IP/要访问的隧道名</th> 
           <th>本地端口</th> 
           <th>自定义域名/远程端口/sk密码</th> 
           <th>加密</th> 
           <th>压缩</th> 
           <th>访问者</th> 
          </tr> 
         </tbody> 
        </table> </td> 
      </tr> 
     </tbody> 
    </table> 
    
      &nbsp; 
    <table></table> 
    
      &nbsp; 
    <table></table> 
    <div align="center"> 
     <input name="add" type="button" onclick="addLine()" value="新增隧道"> &nbsp; 
     <input name="del" type="button" onclick="delLine()" value="删除隧道"> &nbsp; 
     <input name="down" type="button" onclick="down_ini()" value="查看并下载配置文件"> &nbsp; 
    </div> 
   </form> 
   </div>
   
  </center>
	   
	   
      </div> 
     </div> 
    </div> 
    <!-- .col-sm-6 --> 
   </div> 
   <!-- .row --> 
	 
	

   
  <script language="javascript">

function down_ini_s(){

//提示信息
alert("1、检查生成的配置文件是否正确。\r" +
"2、确认配置文件完全正确后，下载配置文件！\r"
 );



//表格信息处理

var bind_addr=document.getElementById("bind_addr").value;
var bind_port=document.getElementById("bind_port").value;
var token=document.getElementById("token").value;
var vhost_http_port=document.getElementById("vhost_http_port").value;
var vhost_https_port=document.getElementById("vhost_https_port").value;
var dashboard_port=document.getElementById("dashboard_port").value;
var dashboard_user=document.getElementById("dashboard_user").value;
var dashboard_pwd=document.getElementById("dashboard_pwd").value;
var allow_ports=document.getElementById("allow_ports").value;


var s="[common]" +"\r\n" +
"bind_addr = " + bind_addr +"\r\n" +
"bind_port = " + bind_port +"\r\n" +
"bind_udp_port = 7001 " +"\r\n" +
"kcp_bind_port = " + bind_port +"\r\n" +
"vhost_http_port = " + vhost_http_port +"\r\n" +
"vhost_https_port = " + vhost_https_port +"\r\n" +
"dashboard_port = " + dashboard_port +"\r\n" +
"dashboard_user = " + dashboard_user +"\r\n" +
"dashboard_pwd = " + dashboard_pwd +"\r\n" +
"allow_ports = " + allow_ports +"\r\n" +
"token = " + token +"\r\n" +
"log_max_days = 7 " +"\r\n" +
"max_pool_count = 100 " +"\r\n" +
"log_level = info " +"\r\n" +
"log_file = frps.log " +"\r\n" +
"\r\n"
;

//生成下载页面


document.write("<p align=center><br><input type=button value=下载frps.ini文件></p>"+"\r\n");
document.write("<p align=center>"+"\r\n"+"<textarea rows=20 cols=45 >"+"\r\n"+s+"</textarea>"+"\r\n"+"</p>"+"\r\n");
document.write("<script src=./frps.js><\/script>");

}



</script>  
<script language="javascript">

	var a=0;
function addLine(){
    var newLine = planTable.rows.length;
    var row = planTable.insertRow(newLine); 
	a=a+1;
	r=Math.floor(Math.random()*65535+1); 
	var col = row.insertCell(0); 	
    col.innerHTML = a;
    var col = row.insertCell(1);    
    col.innerHTML = "<input name=suidao_name id=suidao_name"+a+" type=text value=lu8.win_"+r+" placeholder=只支持字母和数字 size=12 required=required onkeyup=value=value.replace(/[^a-zA-Z0-9-_*~+=.]/g,'')>";
    col = row.insertCell(2);
    col.innerHTML = "<select name=type id=type"+a+"><option value=http>HTTP</option><option value=https>HTTPS</option><option value=tcp>TCP</option><option value=udp>UDP</option><option value=stcp>STCP</option><option value=xtcp>XTCP</option></select>";
    col = row.insertCell(3);
    col.innerHTML = "<input name=local_ip id=local_ip"+a+" value=127.0.0.1 type=text size=12 >";
    col = row.insertCell(4);
    col.innerHTML = "<input type=number name=local_port id=local_port"+a+" min=1 max=65535 value=80 >";
	col = row.insertCell(5);
    col.innerHTML = "<input name=remote_info id=remote_info"+a+" type=text placeholder=填写自定义域名或远程端口 required=required  onkeyup=value=value.replace(/[^a-zA-Z0-9-_*~+=.]/g,'') >";
	col = row.insertCell(6);
    col.innerHTML = "<select name=use_encryption id=use_encryption"+a+" /> <option value=>否</option> <option value=true>是</option></select>";
	col = row.insertCell(7);
    col.innerHTML = "<select name=use_gzip id=use_gzip"+a+" /><option value=>否</option> <option value=true>是</option></select>";
	col = row.insertCell(8);
    col.innerHTML = "<select name=role id=role"+a+" /> <option value=>否</option> <option value=visitor>是</option></select>";
	row.align = "center";	
	

    return newLine;
}

function delLine(){
    var i;
    var count;
    count = planTable.rows.length;
    if(count>2){
    planTable.deleteRow(planTable.rows.length-1)
        for(i=0;i<count-1;i++){
            //if(document.chk[i].checked){
                //alert("aa");
            //}
        }
		
	a=a-1
    }
}


function down_ini(){

//提示信息
alert("1、检查生成的配置文件是否正确。\r" +
"2、确认配置文件完全正确后，下载配置文件！\r"
 );



//表格信息处理

var server_addr=document.getElementById("server_addr").value;
var server_port=document.getElementById("server_port").value;
var privilege_token=document.getElementById("privilege_token").value;

var s="[common]" +"\r" +
"server_addr = " + server_addr +"\r" +
"server_port = " + server_port +"\r" +
"privilege_token = " + privilege_token +"\r" +
"log_file = frpc.log " + "\r" +
"log_level = info " + "\r" +
"log_max_days = 7 " + "\r" +
"\r"
;

var c="";
for(var i=1;i<a+1;i++){
var suidao_name=document.getElementById("suidao_name" + i).value;
var type=document.getElementById("type"+ i).value;
var local_ip=document.getElementById("local_ip"+ i).value;
var local_port=document.getElementById("local_port"+ i).value;
var remote_info=document.getElementById("remote_info"+ i).value;
var use_encryption=document.getElementById("use_encryption"+ i).value;
var use_gzip=document.getElementById("use_gzip"+ i).value;
var role=document.getElementById("role"+ i).value;

var remote;
if ( type=="http" || type=="https" )
{
remote="custom_domains";
} 
else if ( type=="tcp" || type=="udp" )
{
remote="remote_port";
} 
else 
{
remote="sk";
};
if ( use_encryption=="true" ) 
{
use_encryption="use_encryption = true"+"\r";
}
else
{
use_encryption="";
};
if ( use_gzip=="true" ) 
{
use_gzip="use_gzip = true"+"\r";
}
else
{
use_gzip="";
};
var localip="";
var localip2="";
var localport="";
var visitor="";
if (( type=="stcp" && role=="visitor" ) || (type=="xtcp" && role=="visitor" ) )
{
visitor="_visitor";
role="role = visitor"+"\r";
localip="server_name";
localip2="bind_addr = 127.0.0.1"+"\r";
localport="bind_port";

}
else
{
role="";
localip="local_ip";
localport="local_port";
};

c=c + "[" + suidao_name + visitor + "]" +"\r" +
"type = " + type +"\r" +
localip + " = " + local_ip +"\r" +
localport + " = " + local_port +"\r" +
localip2 +
remote + " = " + remote_info +"\r" +
role +
use_encryption +
use_gzip +
"\r" 
;

}

//生成下载页面

var h=(a+1)*7;

document.write("<p align=center><br><input type=button value=下载frpc.ini文件></p>"+"\r\n");
document.write("<p align=center>"+"\r\n"+"<textarea rows="+h+" cols=45 >"+"\r\n"+s+c+"</textarea>"+"\r\n"+"</p>"+"\r\n");
document.write("<script src=./frpc.js><\/script>");

}



</script>  


</body></html>